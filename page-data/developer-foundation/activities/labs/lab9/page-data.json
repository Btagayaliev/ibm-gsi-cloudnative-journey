{"componentChunkName":"component---src-pages-developer-foundation-activities-labs-lab-9-index-mdx","path":"/developer-foundation/activities/labs/lab9/","result":{"pageContext":{"frontmatter":{"title":"Kubernetes Lab 9 - Network Policies"},"relativePagePath":"/developer-foundation/activities/labs/lab9/index.mdx","titleType":"page","MdxNode":{"id":"009b859f-a692-5705-952f-e4a5b5082271","children":[],"parent":"109a4bad-6409-5f69-9a55-1c275ac70652","internal":{"content":"---\ntitle: Kubernetes Lab 9 - Network Policies\n---\n\n## Problem\n\nSetup minikube\n\n```\nminikube start --network-plugin=cni\nkubectl apply -f https://docs.projectcalico.org/v3.9/manifests/calico.yaml\nkubectl -n kube-system set env daemonset/calico-node FELIX_IGNORELOOSERPF=true\nkubectl -n kube-system get pods | grep calico-node\n```\n\nCreate secured pod\n```yaml\napiVersion: v1\nkind: Pod\nmetadata:\n  name: network-policy-secure-pod\n  labels:\n    app: secure-app\nspec:\n  containers:\n  - name: nginx\n    image: bitnami/nginx\n    ports:\n    - containerPort: 8080\n```\n\nCreate client pod\n```yaml\napiVersion: v1\nkind: Pod\nmetadata:\n  name: network-policy-client-pod\nspec:\n  containers:\n  - name: busybox\n    image: radial/busyboxplus:curl\n    command: [\"/bin/sh\", \"-c\", \"while true; do sleep 3600; done\"]\n```\n\nCreate a policy to allow only client pods with label `allow-access: \"true\"` to access secure pod\n ","type":"Mdx","contentDigest":"fe8c30470df104260ca856016ffcefbd","counter":842,"owner":"gatsby-plugin-mdx"},"frontmatter":{"title":"Kubernetes Lab 9 - Network Policies"},"exports":{},"rawBody":"---\ntitle: Kubernetes Lab 9 - Network Policies\n---\n\n## Problem\n\nSetup minikube\n\n```\nminikube start --network-plugin=cni\nkubectl apply -f https://docs.projectcalico.org/v3.9/manifests/calico.yaml\nkubectl -n kube-system set env daemonset/calico-node FELIX_IGNORELOOSERPF=true\nkubectl -n kube-system get pods | grep calico-node\n```\n\nCreate secured pod\n```yaml\napiVersion: v1\nkind: Pod\nmetadata:\n  name: network-policy-secure-pod\n  labels:\n    app: secure-app\nspec:\n  containers:\n  - name: nginx\n    image: bitnami/nginx\n    ports:\n    - containerPort: 8080\n```\n\nCreate client pod\n```yaml\napiVersion: v1\nkind: Pod\nmetadata:\n  name: network-policy-client-pod\nspec:\n  containers:\n  - name: busybox\n    image: radial/busyboxplus:curl\n    command: [\"/bin/sh\", \"-c\", \"while true; do sleep 3600; done\"]\n```\n\nCreate a policy to allow only client pods with label `allow-access: \"true\"` to access secure pod\n ","fileAbsolutePath":"/Users/mjperrins/projects/gsi/ibm-gsi-cloudnative-journey/src/pages/developer-foundation/activities/labs/lab9/index.mdx"}}}}